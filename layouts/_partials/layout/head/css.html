{{/* legacy Tailwind pipeline removed (kept compiled.css pipeline below) */}}

{{/* main css */}}
{{ with resources.Get "css/compiled.css" }}
  {{ if hugo.IsDevelopment }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" />
  {{ else }}
    {{ with . | minify | fingerprint }}
      <link
        rel="stylesheet"
        href="{{ .RelPermalink }}"
        integrity="{{ .Data.Integrity }}"
        crossorigin="anonymous"
      />
    {{ end }}
  {{ end }}
{{ end }}

{{/* chroma styles */}}
{{ with resources.Get "css/chroma.css" }}
  {{ if hugo.IsDevelopment }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" />
  {{ else }}
    {{ with . | minify | fingerprint }}
      <link
        rel="stylesheet"
        href="{{ .RelPermalink }}"
        integrity="{{ .Data.Integrity }}"
        crossorigin="anonymous"
      />
    {{ end }}
  {{ end }}
{{ end }}

{{/* custom styles */}}
{{ range (resources.Match "css/custom/*.css") }}
  {{ if hugo.IsDevelopment }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" />
  {{ else }}
    {{ with . | minify | fingerprint }}
      <link
        rel="stylesheet"
        href="{{ .RelPermalink }}"
        integrity="{{ .Data.Integrity }}"
        crossorigin="anonymous"
      />
    {{ end }}
  {{ end }}
{{ end }}

{{/* 图片画廊CSS - 条件加载 */}}
{{ if .Scratch.Get "lightboxEnabled" }}
  {{- with resources.Get "css/photoswipe.css" }}
    {{- if hugo.IsDevelopment }}
      <link rel="stylesheet" href="{{ .RelPermalink }}" />
    {{- else }}
      {{- with . | minify | fingerprint }}
        <link
          rel="stylesheet"
          href="{{ .RelPermalink }}"
          integrity="{{ .Data.Integrity }}"
          crossorigin="anonymous"
        />
      {{- end }}
    {{- end }}
  {{- end }}
{{ end }}
