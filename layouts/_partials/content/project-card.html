{{/* 项目卡片组件 - 垂直布局（上图下文）
  @context {page} .page 项目页面对象
*/}}

{{ $page := .page }}

{{/* 使用通用图片处理器 */}}
{{- $coverImage := "" -}}
{{- if $page.Params.cover -}}
  {{- partial "content/image-processor.html" (dict
    "context" $page
    "src" $page.Params.cover
    "enablePlaceholder" false
    "outputType" "data"
  ) -}}
  {{- $coverImage = $page.Scratch.Get "imageUrl" -}}
{{- end -}}

{{- $summaryContent := "" -}}
{{- if $page.Params.summary -}}
  {{- $summaryContent = $page.Params.summary -}}
{{- else if $page.Params.description -}}
  {{- $summaryContent = $page.Params.description -}}
{{- else if $page.Summary -}}
  {{- $summaryContent = $page.Summary | plainify | truncate 120 -}}
{{- end -}}

{{/* 项目卡片 - 垂直布局 */}}
<article class="group">
  <a href="{{ $page.RelPermalink }}" class="block">
    <div class="bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 relative flex flex-col overflow-hidden rounded-xl border p-4 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none">

      <!-- 项目封面图片（仅在有真实配置时渲染） -->
      {{- if $coverImage -}}
        <div class="relative h-32 w-full overflow-hidden rounded-lg mb-3">
          <img
            src="{{ $coverImage }}"
            alt="{{ $page.Title }}"
            class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
            loading="lazy"
          />
          <!-- Featured 标签 -->
          {{ if $page.Params.featured }}
            <div class="absolute top-2 right-2 bg-primary text-primary-foreground px-2 py-1 rounded-full text-xs font-semibold shadow-lg">
              {{ i18n "project.featured" | default "Featured" }}
            </div>
          {{ end }}
        </div>
      {{- end -}}

        <!-- Featured 标签 -->
        {{ if $page.Params.featured }}
          <div class="absolute top-2 right-2 bg-primary text-primary-foreground px-2 py-1 rounded-full text-xs font-semibold shadow-lg">
            {{ i18n "project.featured" | default "Featured" }}
          </div>
        {{ end }}
      </div>

      <!-- 项目内容区域 - 底部 -->
      <div class="flex flex-col">
        <!-- 项目标题 - 单行截断 -->
        <h3 class="text-foreground group-hover:text-primary mb-2 text-base font-semibold leading-tight transition-colors duration-200 truncate">
          {{ $page.Title }}
        </h3>

        <!-- 项目摘要 - 单行显示 -->
        {{ if $summaryContent }}
          <p class="text-muted-foreground text-sm leading-relaxed truncate">
            {{ $summaryContent }}
          </p>
        {{ end }}
      </div>
    </div>
  </a>
</article>

